# useEffect ポリシー

useEffect は、API 呼び出し、WebSocket 接続、ブラウザ API、外部ストアのサブスクリプション、タイマーなど、外部との同期にのみ使用する。
それ以外の場合は使用しない。

## アンチパターン

- プロパティまたは派生値をローカル状態にコピーする
- フラグの変更に応じてロジックを実行する
- イベントハンドラーではなくエフェクト内でユーザーアクションを処理する
- エフェクト内で派生または検証状態を更新する
- 空の依存関係配列を使用して 1 回限りの初期化を実行する（代わりに useMemo を使用する）

## 原則

1. プロパティまたは状態から値を導出できる場合は、レンダリング中に計算する
2. ユーザーアクションは、エフェクトではなくイベントハンドラーで処理する
3. エフェクトは、外部システムに影響を与える実際の副作用にのみ使用する
4. useEffect を記述するときは常に、どの外部リソースと同期するかを説明する短いコメントを追加する
